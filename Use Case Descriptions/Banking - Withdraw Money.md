# รายละเอียด Use Case: ถอนเงินจากบัญชี

## Use Case ID
UC-BANK-001

## ชื่อ Use Case
ถอนเงินจากบัญชี (Withdraw Money)

## คำอธิบายโดยย่อ
Use case นี้อนุญาตให้ลูกค้าถอนเงินจากบัญชีธนาคารผ่านพนักงานธนาคาร

## Actors (ผู้มีส่วนเกี่ยวข้อง)
- **Primary Actor (ผู้ใช้หลัก)**: ลูกค้า (Customer)
- **Secondary Actor (ผู้ใช้รอง)**: พนักงานธนาคาร (Bank Teller), ระบบธนาคาร (Bank System)

## Preconditions (เงื่อนไขเบื้องต้น)
1. ลูกค้าต้องมีบัญชีธนาคารที่ใช้งานได้
2. ลูกค้าต้องมียอดเงินคงเหลือเพียงพอ
3. ระบบธนาคารต้องพร้อมใช้งาน

## Postconditions (เงื่อนไขปลายทาง)
**กรณีสำเร็จ (Success End Condition):**
- เงินถูกหักออกจากบัญชีลูกค้า
- ธุรกรรมถูกบันทึกในระบบ
- ลูกค้าได้รับเงินสด

**กรณีล้มเหลว (Failure End Condition):**
- ธุรกรรมถูกยกเลิก
- ไม่มีการหักเงิน
- แสดงข้อความแจ้งข้อผิดพลาด

## Main Flow (ขั้นตอนหลัก)
1. ลูกค้าเข้าไปในธนาคาร
2. ลูกค้ากรอกแบบฟอร์มถอนเงินพร้อมหมายเลขบัญชีและจำนวนเงิน
3. ลูกค้ายื่นแบบฟอร์มให้พนักงาน
4. พนักงานตรวจสอบยืนยันตัวตนลูกค้า (บัตรประชาชน, ลายเซ็น)
5. ระบบตรวจสอบยอดเงินคงเหลือในบัญชี
6. ระบบหักเงินออกจากบัญชี
7. ระบบบันทึกธุรกรรม
8. พนักงานนับเงินสด
9. พนักงานมอบเงินสดให้ลูกค้า
10. ระบบพิมพ์ใบเสร็จ
11. ลูกค้าได้รับเงินและใบเสร็จ

## Alternative Flows (ขั้นตอนทางเลือก)

### AF1: ยอดเงินไม่เพียงพอ
**ที่ขั้นตอนที่ 5:**
- ระบบตรวจพบว่ายอดเงินไม่เพียงพอ
- ระบบแสดงข้อความแจ้งข้อผิดพลาด
- พนักงานแจ้งลูกค้า
- ลูกค้าสามารถเลือกถอนจำนวนที่น้อยลงหรือยกเลิก

### AF2: การยืนยันตัวตนล้มเหลว
**ที่ขั้นตอนที่ 4:**
- พนักงานไม่สามารถยืนยันตัวตนลูกค้าได้
- พนักงานขอเอกสารยืนยันตัวตนเพิ่มเติม
- หากยังยืนยันไม่ได้ ธุรกรรมจะถูกยกเลิก

### AF3: เกินวงเงินถอนรายวัน
**ที่ขั้นตอนที่ 5:**
- ระบบตรวจพบว่าเกินวงเงินถอนรายวัน
- พนักงานแจ้งวงเงินคงเหลือที่สามารถถอนได้
- ลูกค้าสามารถปรับจำนวนหรือยกเลิก

## Exception Flows (ขั้นตอนข้อผิดพลาด)

### EF1: ระบบไม่พร้อมใช้งาน
**ที่ขั้นตอนใดก็ได้:**
- ระบบธนาคารไม่สามารถใช้งานได้
- พนักงานแจ้งลูกค้า
- ธุรกรรมถูกเลื่อนออกไป

### EF2: บัญชีถูกอายัด
**ที่ขั้นตอนที่ 5:**
- ระบบตรวจพบว่าบัญชีถูกอายัด/ปิดการใช้งาน
- พนักงานแจ้งลูกค้าให้ติดต่อฝ่ายบริการบัญชี
- ธุรกรรมถูกยกเลิก

## Special Requirements (ข้อกำหนดพิเศษ)
- **ความปลอดภัย (Security)**: ธุรกรรมทั้งหมดต้องถูกบันทึกพร้อม timestamp
- **ประสิทธิภาพ (Performance)**: การตรวจสอบยอดเงินต้องเสร็จภายใน 3 วินาที
- **การปฏิบัติตามกฎหมาย (Compliance)**: ต้องปฏิบัติตามกฎหมายป้องกันการฟอกเงิน
- **การตรวจสอบ (Audit)**: ประวัติธุรกรรมต้องเก็บไว้ 7 ปี

## Frequency of Use (ความถี่ในการใช้งาน)
สูง - หลายครั้งต่อวัน

## Business Rules (กฎทางธุรกิจ)
1. จำนวนเงินขั้นต่ำในการถอน: 100 บาท
2. จำนวนเงินสูงสุดต่อรายการ: 50,000 บาท
3. วงเงินถอนรายวัน: 200,000 บาท
4. ค่าธรรมเนียม: ฟรีสำหรับเจ้าของบัญชี
